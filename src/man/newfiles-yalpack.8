.\" Manpage for /usr/share/yalpack/newfiles
.\" Contact (kvngncrlsn@gmail.com) to correct errors or typos.
.TH man 8 "10 September 2021" "0.2.0" "newfiles man page"
.SH NAME
.B newfiles
\(em update and optionally manage .new files belonging to yalpack-installed packages
.SH SYNOPSIS
.B /usr/share/yalpack/newfiles
(default location)
.SH DESCRIPTION
.B newfiles
is a shell program provided by 
.B yalpack
(Yet Another Lfs PACKage manager) for updating the .new 
files lists in
.I /var/yalpack/pkgdata/NEWFILES\fR\
\&. Files are listed here under the following conditions:

\t The file exists on the system at the time 
.I .new
files are evaluated

\t The file ends in \(lq.new\(rq

\t The file is provided by a 
.B yalpack\fR\
-installed package

Running the script will update all lists in
.I NEWFILES
to reflect the files installed on the system at the time of running. The
.I NEWFILES
directory is also updated by
.B pkginst(1)\fR\
,
.B pkgup(1)
and
.B pkgremove(1)
on an individual-package basis.

.B newfiles
allows the administrator to take the opportunity to manage .new files on the system; the following options are available for each discovered .new file:

\t o - Overwrite the original file with the .new file.

\t b - Back up the original file at 
.I (filename).old\fR\
, and then overwrite using the .new file.

\t r - Remove the .new file.

\t k - Keep both files as they are for the time being.

\t d - Use diff on the two files. If 
.I /usr/bin/less
is installed on the system, it will be used to display the results. Return to the option menu afterwards.

\t x - Exit the newfiles script

In all cases, overwrites will preserve the ownership and mode of the .new file. These will be the same as the ownership and mode of the original file at the time of installation, provided that they have not been changed in the meantime. See
.B pkginst(1)
for details.
.B newfiles
follows symlinks when performing copy operations, and has been tested on merged-usr systems.

If the non-.new file no longer exists on the system at the time 
.B newfiles
is run,
.B newfiles
will offer to move the .new file into the correct location in lieu of displaying the options above. This should only happen if the original file was on the system at the time of installation or upgrade, and has since been moved or deleted.

If the
.B yalpack
data directory is missing or damaged, running
.B restore-yalpack(8)
can update the contents of
.I NEWFILES
(provided that a good package tree backup is available; see
.B restore-yalpack(8)
for details). Because
.B restore-yalpack(8)
takes longer to run than newfiles and has no management helper, it is generally better to use 
.B newfiles
if possible.
.SH SEE ALSO
.B pkginst(1)\fR\
,
.B pkgup(1)\fR\
,
.B pkgremove(1)\fR\
,
.B restore-yalpack(8)
.SH BUGS
None known.
.SH AUTHOR
K. Eugene Carlson
.MT kvngncrlsn@gmail.com
.ME
